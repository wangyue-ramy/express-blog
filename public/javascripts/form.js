function ajax(t,e,n,r){var o=new XMLHttpRequest;n=JSON.stringify(n),o.onreadystatechange=function(){4==o.readyState&&r(JSON.parse(o.responseText))},o.open(t,e,!0),o.setRequestHeader("Content-type","application/json"),o.send(n)}!function(){function t(t){t.preventDefault();var e=document.getElementsByClassName("form-row"),r=n(this.form),o=new Promise(function(t,e){ajax("post","/login",r,t)});o.then(function(t){switch(t.code){case 1:e[0].setAttribute("prompt",t.des),e[1].setAttribute("prompt","");break;case 2:e[1].setAttribute("prompt",t.des),e[0].setAttribute("prompt","");break;default:window.location.replace(window.location.protocol+"//"+window.location.host+t.redirect)}})}function e(t){t.preventDefault();var e=JSON.stringify(n(this.form)),r=document.getElementsByClassName("form-row");ajax("post","/reg",e,function(t){switch(t.code){case 1:r[1].setAttribute("prompt",t.des),r[0].setAttribute("prompt","");break;case 2:r[0].setAttribute("prompt",t.des),r[1].setAttribute("prompt","");break;case 3:r[0].setAttribute("prompt",t.des),r[1].setAttribute("prompt","");break;default:window.location.replace(window.location.protocol+"//"+window.location.host+t.redirect)}})}function n(t){var e={};inputs=t.getElementsByTagName("input");for(var n=0;n<inputs.length;n++)inputs[n].name&&""!==inputs[n].value&&(e[inputs[n].name]=inputs[n].value);return e}var r=document.getElementById("login"),o=document.getElementById("register");r&&r.addEventListener("click",t),o&&o.addEventListener("click",e),function(){for(var t,e=document.forms[0],n=e.elements,r=0;r<n.length;r++)switch(n[r].name){case"name":n[r].addEventListener("change",function(){this.value.length<6?this.parentElement.setAttribute("prompt","用户名太短"):this.parentElement.setAttribute("prompt","")});break;case"password":t=n[r];break;case"password-confirm":n[r].addEventListener("keyup",function(){this.value&&this.value!=t.value?this.parentElement.setAttribute("prompt","两次密码不一致"):this.parentElement.setAttribute("prompt","")});break;default:return}}()}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0uanMiXSwibmFtZXMiOlsiYWpheCIsIm1ldGhvZCIsInVybCIsImRhdGEiLCJyZXNvbHZlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJKU09OIiwic3RyaW5naWZ5Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInBhcnNlIiwicmVzcG9uc2VUZXh0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwibG9naW4iLCJlIiwicHJldmVudERlZmF1bHQiLCJmb3JtUm93IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwic2VyaWFsaXplIiwidGhpcyIsImZvcm0iLCJwcm9taXNlIiwiUHJvbWlzZSIsInJlamVjdCIsInRoZW4iLCJ2YWx1ZSIsImNvZGUiLCJzZXRBdHRyaWJ1dGUiLCJkZXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJwcm90b2NvbCIsImhvc3QiLCJyZWRpcmVjdCIsInJlZ2lzdGVyIiwidGV4dCIsInJlc3VsdCIsImlucHV0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaSIsImxlbmd0aCIsIm5hbWUiLCJsb2dpbkJ0biIsImdldEVsZW1lbnRCeUlkIiwicmVnQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhc3N3b3JkIiwiZm9ybXMiLCJlbGVtZW50cyIsInBhcmVudEVsZW1lbnQiXSwibWFwcGluZ3MiOiJBQTBHQSxRQUFTQSxNQUFLQyxFQUFRQyxFQUFLQyxFQUFNQyxHQUM3QixHQUFJQyxHQUFNLEdBQUlDLGVBQ2RILEdBQU9JLEtBQUtDLFVBQVVMLEdBQ3RCRSxFQUFJSSxtQkFBcUIsV0FDQyxHQUFsQkosRUFBSUssWUFDSk4sRUFBUUcsS0FBS0ksTUFBTU4sRUFBSU8sZ0JBRy9CUCxFQUFJUSxLQUFLWixFQUFRQyxHQUFLLEdBQ3RCRyxFQUFJUyxpQkFBaUIsZUFBZ0Isb0JBQ3JDVCxFQUFJVSxLQUFLWixJQXBIYixXQTZDSSxRQUFTYSxHQUFNQyxHQUNYQSxFQUFFQyxnQkFDRixJQUFJQyxHQUFVQyxTQUFTQyx1QkFBdUIsWUFDMUNsQixFQUFPbUIsRUFBVUMsS0FBS0MsTUFDdEJDLEVBQVUsR0FBSUMsU0FBUSxTQUFTdEIsRUFBU3VCLEdBQ3hDM0IsS0FBSyxPQUFRLFNBQVVHLEVBQU1DLElBRWpDcUIsR0FBUUcsS0FBSyxTQUFxQkMsR0FDOUIsT0FBUUEsRUFBTUMsTUFDVixJQUFLLEdBQ0RYLEVBQVEsR0FBR1ksYUFBYSxTQUFVRixFQUFNRyxLQUN4Q2IsRUFBUSxHQUFHWSxhQUFhLFNBQVUsR0FDbEMsTUFDSixLQUFLLEdBQ0RaLEVBQVEsR0FBR1ksYUFBYSxTQUFVRixFQUFNRyxLQUN4Q2IsRUFBUSxHQUFHWSxhQUFhLFNBQVUsR0FDbEMsTUFDSixTQUNJRSxPQUFPQyxTQUFTQyxRQUFRRixPQUFPQyxTQUFTRSxTQUFXLEtBQU9ILE9BQU9DLFNBQVNHLEtBQU9SLEVBQU1TLGFBS3ZHLFFBQVNDLEdBQVN0QixHQUNkQSxFQUFFQyxnQkFDRixJQUFJZixHQUFPSSxLQUFLQyxVQUFVYyxFQUFVQyxLQUFLQyxPQUNyQ0wsRUFBVUMsU0FBU0MsdUJBQXVCLFdBQzlDckIsTUFBSyxPQUFRLE9BQVFHLEVBQU0sU0FBU3FDLEdBQ2hDLE9BQVFBLEVBQUtWLE1BQ1QsSUFBSyxHQUNEWCxFQUFRLEdBQUdZLGFBQWEsU0FBVVMsRUFBS1IsS0FDdkNiLEVBQVEsR0FBR1ksYUFBYSxTQUFVLEdBQ2xDLE1BQ0osS0FBSyxHQUNEWixFQUFRLEdBQUdZLGFBQWEsU0FBVVMsRUFBS1IsS0FDdkNiLEVBQVEsR0FBR1ksYUFBYSxTQUFVLEdBQ2xDLE1BQ0osS0FBSyxHQUNEWixFQUFRLEdBQUdZLGFBQWEsU0FBVVMsRUFBS1IsS0FDdkNiLEVBQVEsR0FBR1ksYUFBYSxTQUFVLEdBQ2xDLE1BQ0osU0FDSUUsT0FBT0MsU0FBU0MsUUFBUUYsT0FBT0MsU0FBU0UsU0FBVyxLQUFPSCxPQUFPQyxTQUFTRyxLQUFPRyxFQUFLRixhQU10RyxRQUFTaEIsR0FBVUUsR0FDZixHQUFJaUIsS0FDSkMsUUFBU2xCLEVBQUttQixxQkFBcUIsUUFDbkMsS0FBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlGLE9BQU9HLE9BQVFELElBQ3pCRixPQUFPRSxHQUFHRSxNQUE0QixLQUFwQkosT0FBT0UsR0FBR2YsUUFDOUJZLEVBQU9DLE9BQU9FLEdBQUdFLE1BQVFKLE9BQU9FLEdBQUdmLE1BRzNDLE9BQU9ZLEdBcEdYLEdBQUlNLEdBQVczQixTQUFTNEIsZUFBZSxTQUNuQ0MsRUFBUzdCLFNBQVM0QixlQUFlLFdBRWpDRCxJQUNBQSxFQUFTRyxpQkFBaUIsUUFBU2xDLEdBRW5DaUMsR0FDQUEsRUFBT0MsaUJBQWlCLFFBQVNYLEdBR3JDLFdBSUksSUFBSyxHQUREWSxHQUZBM0IsRUFBT0osU0FBU2dDLE1BQU0sR0FDdEJDLEVBQVc3QixFQUFLNkIsU0FFWFQsRUFBSSxFQUFHQSxFQUFJUyxFQUFTUixPQUFRRCxJQUNqQyxPQUFRUyxFQUFTVCxHQUFHRSxNQUNoQixJQUFLLE9BQ0RPLEVBQVNULEdBQUdNLGlCQUFpQixTQUFVLFdBQy9CM0IsS0FBS00sTUFBTWdCLE9BQVMsRUFDcEJ0QixLQUFLK0IsY0FBY3ZCLGFBQWEsU0FBVSxTQUUxQ1IsS0FBSytCLGNBQWN2QixhQUFhLFNBQVUsS0FHbEQsTUFDSixLQUFLLFdBQ0RvQixFQUFXRSxFQUFTVCxFQUNwQixNQUNKLEtBQUssbUJBQ0RTLEVBQVNULEdBQUdNLGlCQUFpQixRQUFTLFdBQzlCM0IsS0FBS00sT0FBU04sS0FBS00sT0FBU3NCLEVBQVN0QixNQUNyQ04sS0FBSytCLGNBQWN2QixhQUFhLFNBQVUsV0FFMUNSLEtBQUsrQixjQUFjdkIsYUFBYSxTQUFVLEtBR2xELE1BQ0osU0FDSSIsImZpbGUiOiJmb3JtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGxvZ2luQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luJyk7XHJcbiAgICB2YXIgcmVnQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdGVyJyk7XHJcblxyXG4gICAgaWYgKGxvZ2luQnRuKSB7XHJcbiAgICAgICAgbG9naW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsb2dpbik7XHJcbiAgICB9XHJcbiAgICBpZiAocmVnQnRuKSB7XHJcbiAgICAgICAgcmVnQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVnaXN0ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LmZvcm1zWzBdO1xyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IGZvcm0uZWxlbWVudHM7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgc3dpdGNoIChlbGVtZW50c1tpXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICduYW1lJzpcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoIDwgNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgncHJvbXB0JywgJ+eUqOaIt+WQjeWkquefrScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgncHJvbXB0JywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwYXNzd29yZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQgPSBlbGVtZW50c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3Bhc3N3b3JkLWNvbmZpcm0nOlxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICYmIHRoaXMudmFsdWUgIT0gcGFzc3dvcmQudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3Byb21wdCcsICfkuKTmrKHlr4bnoIHkuI3kuIDoh7QnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3Byb21wdCcsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KSgpO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBsb2dpbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBmb3JtUm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZm9ybS1yb3cnKTtcclxuICAgICAgICB2YXIgZGF0YSA9IHNlcmlhbGl6ZSh0aGlzLmZvcm0pO1xyXG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGFqYXgoJ3Bvc3QnLCAnL2xvZ2luJywgZGF0YSwgcmVzb2x2ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uRnVsZmlsbGVkKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodmFsdWUuY29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1Sb3dbMF0uc2V0QXR0cmlidXRlKCdwcm9tcHQnLCB2YWx1ZS5kZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1Sb3dbMV0uc2V0QXR0cmlidXRlKCdwcm9tcHQnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJvd1sxXS5zZXRBdHRyaWJ1dGUoJ3Byb21wdCcsIHZhbHVlLmRlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJvd1swXS5zZXRBdHRyaWJ1dGUoJ3Byb21wdCcsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgdmFsdWUucmVkaXJlY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXIoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHNlcmlhbGl6ZSh0aGlzLmZvcm0pKTtcclxuICAgICAgICB2YXIgZm9ybVJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Zvcm0tcm93Jyk7XHJcbiAgICAgICAgYWpheCgncG9zdCcsICcvcmVnJywgZGF0YSwgZnVuY3Rpb24odGV4dCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRleHQuY29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1Sb3dbMV0uc2V0QXR0cmlidXRlKCdwcm9tcHQnLCB0ZXh0LmRlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJvd1swXS5zZXRBdHRyaWJ1dGUoJ3Byb21wdCcsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUm93WzBdLnNldEF0dHJpYnV0ZSgncHJvbXB0JywgdGV4dC5kZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1Sb3dbMV0uc2V0QXR0cmlidXRlKCdwcm9tcHQnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybVJvd1swXS5zZXRBdHRyaWJ1dGUoJ3Byb21wdCcsIHRleHQuZGVzKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtUm93WzFdLnNldEF0dHJpYnV0ZSgncHJvbXB0JywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgd2luZG93LmxvY2F0aW9uLmhvc3QgKyB0ZXh0LnJlZGlyZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXJpYWxpemUoZm9ybSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICBpbnB1dHMgPSBmb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICghIWlucHV0c1tpXS5uYW1lICYmIGlucHV0c1tpXS52YWx1ZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtpbnB1dHNbaV0ubmFtZV0gPSBpbnB1dHNbaV0udmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbn0pKCk7XHJcblxyXG5mdW5jdGlvbiBhamF4KG1ldGhvZCwgdXJsLCBkYXRhLCByZXNvbHZlKSB7XHJcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xyXG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICB4aHIuc2VuZChkYXRhKTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
